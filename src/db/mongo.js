'use strict';

const mongoose = require('mongoose');
const UTIL = require.main.require('./util');


///////////////////////////////////////////////////////////////////////////////////
///// PROMISIFY  METHODS //////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////

var db_mongo_connect = (args, success, fail) => {
	mongoose.connect(`mongodb://${__.DB.MONGODB_HOST}:${__.DB.MONGODB_PORT}/${__.DB.MONGODB_NAME}`, {
            useNewUrlParser: true,
			useUnifiedTopology: true
		})
		.then((resp) => {
			success(resp);
        })
        .catch((error) => {
            fail(error);
		})
};


///////////////////////////////////////////////////////////////////////////////////
///// MODULE EXPORTS //////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////

module.exports = {
    connect: () => {
        let method = db_mongo_connect;
        return UTIL.promisify(method);
    },

};